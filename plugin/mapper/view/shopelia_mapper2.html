<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
  <link rel="stylesheet" src="../jquery-ui.css" />
  <script type="text/javascript" src="../jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.mobile-1.3.1.min.js"></script>
  <script type="text/javascript" src="../jquery-ui-1.10.2.min.js"></script>
  <script type="text/javascript" src="../lib/utils.js"></script>
  <script type="text/javascript" src="../lib/underscore-min.js"></script>
  <style>
    html, body {
      height: 100%;
    }
    body {
      margin: 0px;
    }
    .good {
      color: green;
    }
    .bad {
      color: red;
    }
    .actionsList {
      padding: 5px; /* to handle empty list*/
    }
  </style>
</head>

<body>
  <div data-role="popup" data-history="false" id="noServerPopup">
      <p>Impossible de se connecter au serveur.<br>Je travaille en local.</p>
  </div>

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  START  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" id="startPage">
    <div data-role="header">
      <h1>Shopelia Plugin - Start Menu</h1>
      <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="info" data-iconpos="notext" href="#helpStrategies" class="help">Tester la strategy</a>
      </div>
    </div>
    <div data-role="content">
      <div class="ui-grid-c">
        <div class="ui-block-a"><a data-role="button" data-icon="check" id="saveBtn">Save</a></div>
        <div class="ui-block-b"><a data-role="button" data-icon="refresh" id="importBtn">Load</a></div>
        <div class="ui-block-c"><a data-role="button" data-icon="plus" id="newBtn">New</a></div>
        <div class="ui-block-d"><a data-role="button" data-icon="delete" id="clearBtn">Clear</a></div>
      </div><!-- /grid-c -->
      <div>
        <p>Site actuel : <span id="currentHostSpan"></span></p>
        <label>
          <input type="checkbox" id="isCurrentHostMobile">
          Version mobile
        </label>
        <p><a data-role="button" data-icon="plus" id="addProductUrl">Ajouter la page actuelle à la liste des produits de test</a></p>
      </div>
      <h2>Liste des étapes</h2>
      <ul data-role="listview" id="stepsList" data-inset="true"></ul>

      <h2>Aide - Menu</h2>
      <ul>
        <li><a href="#tuto">Tutoriel en 2 minutes</a></li>
        <li><a href="#helpStrategies">Les stratégies</a></li>
        <li><a href="#helpSteps">Les étapes</a></li>
        <li><a href="#helpActions">Les actions</a></li>
        <li><a href="#helpTypes">Les types</a></li>
        <li><a href="#helpArguments">Les arguments</a></li>
        <li><a href="#helpPaths">Les chemins</a></li>
        <li><a href="#helpContextes">Les contextes</a></li>
        <li><a href="#helpCode">Le code</a></li>
        <li><a href="#helpTest">Le test</a></li>
        <li><a href="#helpErrors">Les erreurs</a></li>
      </ul>
    </div>
  </div>

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  STEP  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" class="stepTemplatePage">
    <div data-role="header">
      <div class="ui-btn-left" data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="home" data-iconpos="notext" href="#startPage">Home</a>
        <a data-role="button" data-icon="arrow-l" data-iconpos="notext" class="previousStepButton">Previous</a>
      </div>
      <h1 class="title">Step's name</h1>
      <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="info" data-iconpos="notext" href="#help" class="help">Aide</a>
        <a data-role="button" data-icon="gear" data-iconpos="notext" class="testBtn">Tester la strategy</a>
        <div data-role="popup" class="testPopup ui-content" data-theme="e">
          <a data-role="button" data-rel="back" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
          <p class="popupText"></p>
        </div>
        <a data-role="button" data-icon="arrow-r" data-iconpos="notext" class="nextStepButton">Next</a>
      </div>
    </div>
    <div data-role="content">
      <h3>Prochaine action à réaliser :</h3>
      <div data-role="controlgroup" data-type="horizontal">
        <select class="newActionSelect">
          <option value="">Choisissez une action pré-définie</option>
        </select>
        <a href="#newActionPage" class="newActionButton" data-role="button" data-iconpos="right" data-icon="plus">Nouveau</a>
      </div>
      <h3>Liste des actions à réaliser :</h3>
      <ul data-role="listview" class="actionsList" data-inset="true">
        <li data-role="list-divider" class="actionDivider classifiedDivider">Actions classées :</li>
        <li data-role="list-divider" class="actionDivider toClassifyDivider">Actions à classer :</li>
      </ul>
    </div><!-- content -->
  </div><!-- page -->

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  NEW  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" id="newActionPage">

    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Ajout d'une nouvelle action</h1>
    </div>
    <div data-role="content">
      <label>
        Choisissez un modèle d'action pré-existant...
        <select class="newActionSelect">
          <option value=""></option>
        </select>
      </label>
      <hr>
      <h3>... ou créez en une nouvelle.</h3>
      <ul data-role="listview" data-inset="true">
        <li data-role="fieldcontain">
            <label for="newName">Nom de l'action :</label>
            <input type="text" id="newName" class="name" placeholder="Ex : Cliquer sur le bouton 'Mon Compte'." data-clear-btn="true">
        </li>
        <li data-role="fieldcontain">
          <label for="newType">Type de l'action :</label>
          <select id="newType" class="type"></select>
        </li>
        <li data-role="fieldcontain">
          <label for="newArgument">Argument :</label>
          <select id="newArgument" class="argument"></select>
        </li>
      </ul>
      <div>
        <a data-role="button" data-inline="true" class="backButton">Annuler</a>
        <a data-role="button" data-inline="true" id="newAddBtn">Ajouter</a>
      </div>
    </div><!-- content -->
  </div><!-- page -->

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  EDIT  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" id="editActionPage">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1 style="margin-right:20%;margin-left:20%;">Édition de l'action - <span class="actionName">#</span></h1>
      <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="info" data-iconpos="notext" href="#helpActions" class="help">Aide</a>
      </div>
    </div>
    <div data-role="content">
      <ul data-role="listview" data-inset="true">
        <li data-role="fieldcontain">
            <label for="editDescription">Nom de l'action:</label>
            <input type="text" id="editDescription" class="description" placeholder="Ex : Cliquer sur le bouton 'Mon Compte'." data-clear-btn="true">
        </li>
        <li data-role="fieldcontain">
          <label for="editType">Type de l'action:</label>
          <select id="editType" class="type">
            <option value=""></option>
          </select>
        </li>
        <li data-role="fieldcontain">
          <label for="editArgument">Argument:</label>
          <select id="editArgument" class="argument">
            <option value=""></option>
        </select>
        </li>
        <li data-role="fieldcontain">
          <label for="editPass">Passer si on ne trouve pas</label>
          <input type="checkbox" id="editPass" class="pass">
        </li>
        <li data-role="fieldcontain">
          <label for="editUrl">Entrez l'url:</label>
          <input type="text" id="editUrl" class="url" placeholder="Ex : http://www.shopelia.com/cart" data-clear-btn="true">
        </li>
        <li data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal">
            <legend>Chemin:</legend>
            <textarea class="path" rows="2" style="width:100%;" placeholder='Ex : input#login'></textarea>
            <div data-role="controlgroup" data-type="horizontal">
              <a data-role="button" data-icon="search" id="searchXPathBtn">Chercher</a>
              <a data-role="button" id="nbElementsMatchedBtn">&nbsp;</a>
              <a data-role="button" href="#editPathPage" data-icon="edit" id="editPathBtn">Editer</a>
            </div>
          </fieldset>
        </li>
        <li data-role="fieldcontain">
          <label for="editCode">Code généré:</label>
          <textarea id="editCode" class="code" rows="3">Ex : pl_fill(xpath, login)</textarea>
        </li>
      </ul>
      <div data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="back" class="backButton" id="editCancelBtn">Annuler</a>
        <a data-role="button" data-icon="check" class="backButton" id="editSaveBtn">Save</a>
        <a data-role="button" data-icon="delete" class="backButton" id="editDeleteBtn">Del</a>
      </div>
    </div><!-- content -->
  </div><!-- page -->

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  PATH  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" id="editPathPage">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Édition du chemin</h1>
      <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="info" data-iconpos="notext" href="#helpContextes" class="help">Aide</a>
      </div>
    </div>
    <div data-role="content">
      <ul data-role="listview" data-inset="true">
        <li data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal" class="context">
            <legend>Contexte n°:</legend>
          </fieldset>
        </li>
        <li data-role="fieldcontain">
          <label for="xpath">XPath:</label>
          <textarea id="xpath" readonly></textarea>
        </li>
        <li data-role="fieldcontain">
          <label for="fullXPath">XPath complet:</label>
          <textarea id="fullXPath" readonly></textarea>
        </li>
        <li data-role="fieldcontain">
          <label for="css">CSS:</label>
          <textarea id="css" readonly></textarea>
        </li>
        <li data-role="fieldcontain">
          <label for="fullCSS">CSS complet:</label>
          <textarea id="fullCSS" readonly></textarea>
        </li>
      </ul>
      <ul data-role="listview" data-inset="true">
        <li data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal">
            <legend>Chemin final:</legend>
            <textarea id="finalPath" rows="3" style="width:100%;"></textarea>
            <div data-role="controlgroup" data-type="horizontal">
              <a data-role="button" data-inline="true" data-icon="search" id="pathSearchPathBtn" title="Cherche les éléments correspondant.">Chercher</a>
              <a data-role="button" data-inline="true" id="pathNbElementsMatchedBtn" title="Nombre d'éléments trouvés">&nbsp;</a>
              <a data-role="button" data-inline="true" data-icon="gear" id="pathMergeBtn" title="Fusionne le contexte actuel (*) avec l'ancien contexte sélectionné.">Fusion</a>
            </div>
          </fieldset>
        </li>
      </ul>
      <div data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-inline="true" data-icon="back" class="backButton" id="pathCancelBtn">Annuler</a>
        <a data-role="button" data-inline="true" data-icon="check" class="backButton" id="pathOkBtn">Ok</a>
      </div>
    </div><!-- content -->
  </div><!-- page -->

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  ERROR  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" id="errorPage">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Erreur</h1>
      <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
        <a data-role="button" data-icon="info" data-iconpos="notext" href="#helpErrors" class="help">Aide</a>
      </div>
    </div>
    <div data-role="content">
      <p><b>Message : </b><span id="errMsg">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</span></p>
      <p><b>Step : </b><span id="errStep">Lorem ipsum dolor sit amet"</span></p>
      <p><b>Action : </b><span id="errAction">Lorem ipsum dolor sit amet, consectetur adipisicing elit</span></p>
      <p><b>Code : </b></p>
      <code id="errCode">Lorem ipsum dolor sit amet,<br>consectetur adipisicing elit,<br>sed do eiusmod tempor incididunt ut labore<br>et dolore magna aliqua.<br>Ut enim ad minim veniam.</code>
      <p><b>Logs : </b><br><span id="errLogs"></span></p>
      <h4>Screenshot : </h4>
      <p><img id="errScreenshot" src=""></p>
    </div><!-- content -->
  </div><!-- page -->

<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  AIDE  ~~~~~~~~~~~~~~~~~~~~~~~~~~~  -->
  <div data-role="page" id="tuto">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Tuto en 2 min</h1>
    </div>
    <div data-role="content">
      <p>Pour chaque étapes de la commande, il faut indiquer les actions à réaliser ainsi que leur ordre pour arriver au bout.</p>
      <p>Les principaux types d'actions que l'on peut réaliser sont : <p>
      <ul>
        <li>'Ouvrir la page' - auquel cas on doit indiquer l'url ;</li>
        <li>'Cliquer sur' - auquel cas on doit indiquer le <i>path</i> de l'élément à cliquer ;</li>
        <li>'Remplir le champs - auquel cas on doit indiquer le <i>path</i> de l'élément à remplir ainsi que les données à entrer.</li>
      </ul>
      <p>Pour indiquer le <i>path</i> d'un élément, il suffit de cliquer dessus en maintenant la touche Ctrl enfoncée.</p>
      <p>Une fois que vous avez fini une étape, vous pouvez la tester puis passer à l'étape suivante.</p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->

  <div data-role="page" id="helpStrategies">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les stratégies</h1>
    </div>
    <div data-role="content">
      <p>Une stratégie définie une suite d'étapes et d'actions à réaliser afin de parvenir à un objectif, dans notre cas, acheter un produit sur un site commerçant.</p>

      <p>Pour cela, il faut se rendre sur la page d'accueil du site en question et activer le plugin.<br>
      L'option <b>Version mobile</b> permet de faire croire au site que nous nous connectons depuis un téléphone ou une tablette.<br>
      Le site s'adapte donc à ce périphérique, et il en résulte une version plus simple et moins encline au changement que sa grande soeur desktop.<br>
      Mais il se peut aussi que la version mobile soit à une adresse différente (souvent en ramplaçant 'www.site.com' par 'm.site.com' ou 'mobile.site.com').<br>
      A vous de chercher la meilleure version où elle se trouve.</p>

      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->

  <div data-role="page" id="helpSteps">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les étapes</h1>
    </div>
    <div data-role="content">
      <p>Les étapes sont comme des sous-objectifs, relativement indépendante les unes des autres.<br>
      Ce sont des suites d'actions à réaliser dans un ordre précis (ouvrir la page, cliquer sur le lien, remplir le champs X, etc).</p>

      <p>Pour le moment, il y a 7 étapes indispensables :</p>
      <ol>
        <li><a href="#help_account_creation">l'inscription</a></li>
        <li><a href="#help_login">la connexion</a></li>
        <li><a href="#help_unlog">la déconnexion</a></li>
        <li><a href="#help_empty_cart">le vidage du panier</a></li>
        <li><a href="#help_add_to_cart">l'ajout d'un produit</a></li>
        <li><a href="#help_finalize_order">la finalisation</a></li>
        <li><a href="#help_payment">le payement</a></li>
      </ol>
      <p>Pour chaque étape, il y a des actions par défault.<br>
      On les retrouve souvent, elles sont là pour vous faire gagner du temps, mais ne sont pas obligatoire.<br>
      Vous pouvez bien sur les modifier à votre guise.</p>

      <p>Ces étapes, de même que celle que vous créerez, sont mis dans la catégorie, <b>actions à classer</b>.<br>
      Elles ne sont pas utiliser lors des tests ou lors de la génération de la statégie finale.</p>

      <p>Vous devez les glisser-déposer dans la catégorie <b>actions classées</b>, au bon endroit, pour qu'elles soient prises en compte.</p>

      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->

  <div data-role="page" id="help_account_creation">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - L'inscription</h1>
    </div>
    <div data-role="content">
      <p>L'inscription permet de se créer un compte sur le site, afin qu'il se souvienne de nos informations, et qu'on n'ait pas à les retaper à chaque fois.</p>

      <p>Précision : Les deux champs importants sont l'email et le mot de passe. Ils serviront à nous connecter par la suite.</p>

      <p>Astuces : Si un login est demandé, il faut le générer soit aléatoirement si il ne reservira pas après (attention aux contraintes imposées par le site, comme la présence ou non de chiffres, majuscules, symboles, etc), soit à partir de l'adresse email pour le retrouver par la suite. Attention à ce qu'il soit bien unique (random à partir d'une seed par exemple).</p>

      <p>Pensez à vérifier que l'inscription s'est bien passée !</p>
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->

  <div data-role="page" id="help_login">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - La connexion</h1>
    </div>
    <div data-role="content">

      <p>Nous permet de s'identifier sur le site via l'email (ou le login) et le mot de passe.</p>

      <p>Pensez à vérifier que la connexion s'est bien passée.</p>
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="help_unlog">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - La déconnexion</h1>
    </div>
    <div data-role="content">
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->

  <div data-role="page" id="help_empty_cart">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Le vidage du panier</h1>
    </div>
    <div data-role="content">
      <p>Nécessaire, au cas où l'utilisateur avait ajouté par lui même des produits, ou que le panier ne s'était pas vidé la fois précédente.</p>

      <p>Pensez à vérifier que le panier est bien vide.</p>
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="help_add_to_cart">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - L'ajout d'un produit</h1>
    </div>
    <div data-role="content">
      <p>La stratégie ouvre toute seule la page du produit en question.<br>
      Il faut maintenant indiquer où sont <b>le titre, le prix et le prix de livraison</b>.</p>

      <p>Astuce : Certain sites ajoutes les produits sans recharger la page, via ajax : pensez à mettre en pause la stratégie afin de laisser le temps au différent traitement de s'exécuter.</p>
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="help_finalize_order">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - La finalisation</h1>
    </div>
    <div data-role="content">
      <p>Maintenant que les produit sont ajoutés, il est temps de passer commande.<br>
      Aller sur la page du panier, indiquez si possible le <b>prix cumulé des produits, le prix de livraison total, et le prix total</b>.<br>
      Sinon certain sont manquant, ils seront calculer à partir des infos de chaque produits.</p>

      <p>Précision : le prix de livraison en particulier peut diminuer si plusieurs produits sont commandés en même temps.<br>
      <b>Attention</b> : c'est aussi le moment de désactiver les <b>assurances, options, etc</b>.</p>

      <p>C'est aussi le moment où l'on indique les informations manquantes, addresse de facturation, de livraison, type de livraison, etc.</p>
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="help_payment">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Le payement</h1>
    </div>
    <div data-role="content">
      <p>Maintenant que toutes les informations sont renseignés, que l'utilisateur (ou l'éditeur) a accepté la transaction, il faut renseigner les informations bancaires.</p>

      <p>Astuce : attention en particulier au type de la carte.</p>
      <p><a href="#helpSteps">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpActions">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les actions</h1>
    </div>
    <div data-role="content">
      <p>Une action correspond à une action faite par un utilisateur.</p>

      <p>Une action possède un nom qui ne sert qu'à l'identifier.</p>

      <p>Une action possède un <a href="#helpTypes">type</a> : les 3 types principaux sont <b>ouvrir</b> une page (<i>open</i>), <b>cliquer</b> sur un élément (<i>clic</i>), <b>remplir</b> un champs (<i>fill</i>).<br>
      Mais d'autres types plus spécifiques sont proposés (cliquer sur un lien, ou un radio bouton, ou une checkbox sont autant de variante du clic simple).<br>
      Ils servent à rendre l'algorithme plus intelligent : si l'élément est manquant, il sait ce qu'il faut rechercher.</p>

      <p>Certaines actions prennent un <a href="#helpArguments">argument</a>, variable d'un site à l'autre, d'une commande à l'autre, etc.<br>
      Pour ouvrir une page, il faut lui indiquer l'URL.<br>
      Pour remplir un champs il faut lui indiquer les données à rentrer etc.<br>
      Les <b>arguments standart</b> sont les URL et les données entrées par l'utilisateur : son adresses email, son mot de passe, ses coordonnées, etc.</p>

      <p>Certaines actions sont <b>facultatives</b> : fermer une popup, décocher une assurance qui n'est présente que pour certain type de produit, etc.<br>
      Ces actions, si elles ne peuvent être menée à leur terme, n'empêcheront pas les autres actions d'être réalisées, au contraire des actions normales, obligatoires, qui feront planter la stratégie et génèreront des messages d'erreurs si elles ne sont pas menées à bien.</p>

      <p>La plupart des actions ont besoin qu'on leur précise l'endroit où cliquer, le champs à remplir, et cela ce fait par <a href="#helpPaths">le chemin</a>, ou <i>path</i> en anglais.</p>

      <p>Une fois ces informations renseignées, du <a href="#helpCode">code</a> ruby est automatiquement généré.<br>
      A chaque modification d'un des champs précédemment cité, il est actualisé.</p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpTypes">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les types</h1>
    </div>
    <div data-role="content">
      <p>Le type correspond à l'action que l'on veut réaliser.<br>
      Mais derrière ça, il correspond aussi et surtout à la méthode ruby appelée.<br>
      Celle-ci peuvent être appelée de deux façon : avec ou sans le <b>bang</b> ('!') à la fin.<br>
      Traditionnelement, le bang génère une <b>exception</b> si quelque chose ne pas, alors que la version sans ne crash pas.<br>
      Chaque méthode attend aussi des arguments qui lui sont spécifiques (url, chemin, chemin+email, etc).</p>

      <p>En plus des actions classiques (cliquer, remplir), on peut aussi récupérer des informations (prix, titre, etc), vérifier qu'un élément est présent, attendre un peu, écrire son propre code.</p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpArguments">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les arguments</h1>
    </div>
    <div data-role="content">
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpPaths">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les chemins</h1>
    </div>
    <div data-role="content">
      <p>Les chemins, ou 'path', indique où se trouve le ou les éléments dans la page.<br>
      Une page peut être vu comme un boite, qui contient d'autres boites, qui elles-même contiennent d'autres boites.<br>
      Pour trouver un lien ou un champs, on doit lui indiquer quelles sont les boites successives qu'il faut ouvrir.<br>
      Pour identifier une boite parmis les autres, nous possèdont plusieurs indicateurs : les types, les identifiants, les classes, et les noms.</p>

      <p>Chaque boite à un type, <b>sa balise HTML</b>, qui indique ce qu'elle fait, le type d'information qu'elle contient.<br>
      Par exemple les <i>'a'</i> pour anchor sont des liens vers d'autres pages, <i>'img'</i> des images, <i>'p'</i> des paragraphes, <i>'form'</i> un formulaire, <i>'input'</i> un élément de formulaire.<br>
      Astuce : <i>'span'</i> est une boite générique <b>'inline'</b>, qui contient du texte ou d'autres boites "en ligne" et n'engendre donc pas de retour à la ligne à la fin. <i>'div'</i> est une boite générique <b>'block'</b> qui contient d'autres boites. Elle occupe toute la place possible en largeur, et engendre donc un retour à la ligne. En servent principalement à la <b>hiérarchisation</b> et la mise en page. On trouvera beaucoup ce genre de boites dans les chemins.</p>

      <p>Certaines boites ont un <i>id</i>, un <b>identifiant unique</b> dans la page (normalement et en général mais il ne faut pas s'y fier à 100%). Ces <i>id</i> sont pratiques car ils servent souvent de <b>point de départ</b> pour un chemin. On a pas besoin de préciser où ils se trouvent.<br>
      La plupart des champs de formulaires ont un de ces identifiants, et peuvent donc être identifié juste grâce à celui-ci.</p>

      <p>Quand ce n'est pas le cas, on peut ce fier aux <i>classes CSS</i> : ce sont des identifiant qui servent à indiquer comment l'élément doit être affiché.<br>
      On peut donc dire : donne moi la balise <i>'a'</i> qui est dans un <i>'div'</i> qui a une marge, qui est dans un <i>'div'</i> qui à l'<i>id</i> 'infos_produit'.</p>

      <p>On peut traduire ce chemin de deux façons : en <b>CSS</b> ou en <b>XPath</b>.<br>
      Ce sont deux langages pour <b>indiquer des chemins</b>.</p>

      <pre>En CSS : div#infos_produit > div.marge > a
      En Xpath : //div[@id='infos_produit']/div[@class='marge']/a</pre>

      <p>Les selecteurs CSS prennent bien en compte les <i>id</i> et les <i>classes</i> et sont donc très <b>compacts</b>, mais sont un peu plus limités que le XPath.</p>

      <p>Lorque vous êtes en train de modifier un action, si vous <b>cliquer</b> sur un élement de la page en maintenant la touche <b>CTRL enfoncée</b>, son chemin est calculé et indiqué dans le champs correspondant.<br>
      Astuce : à chaque qu'un chemin est calculé ou que l'on clique sur "Chercher", les éléments correspondants sont trouvés, mis en évidence, et leur <b>nombre</b> est indiqué dans la case à coté.</p>

      <p><b>Attention :</b> si les sélecteurs ne sont pas suffisemment précis, il se peut que que <b>plusieurs éléments</b> soient sélectionnés. <br>
      Par exemple le sélecteur CSS "div a" sélectionnent tous les liens qui ont un div dans leurs ancêtres, antant dire presque tous !<br>
      Pensez à vérifier à chaque fois que le bon nombre d'élément ait été sélectionné.</p>
      
      <p>Aller à l'aide sur <a href="#helpContextes">les contextes.</a></p>

      <p>Pour plus d'infos sur les chemins :<br>
      http://www.w3schools.com/cssref/css_selectors.asp<br>
      http://fr.wikipedia.org/wiki/XPath<br>
      http://www.w3schools.com/xpath/default.asp</p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpContextes">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les contextes</h1>
    </div>
    <div data-role="content">
      <p>Aller à l'aide sur <a href="#helpPaths">les chemins.</a></p>

      <p>Assez souvent (malheureusement) les identifiants sont générés aléatoirement, et change donc d'une exécution à l'autre.<br>
      De même il arrive que le site change de structure, de façon subtile et aléatoire.<br>
      Il faut dans ce cas adapté le path pour le rendre plus ou moins spécifique.</p>

      <p>Pour aider dans cette tache, le plugin intègre un éditeur de path.<br>
      Celui-ci permet de visualiser le contexte des précédents éléments associés à cette action.<br>
      Sont ainsi disponible pour chaque contexte le XPath et le CSS de l'élément, aussi que les XPath et CSS complet depuis la racine du site.</p>

      <p>La fonction 'Fusionner' permet de fusionner le chemin du contexte sélectionné avec le chemin du context actuel.</p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpCode">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Le code</h1>
    </div>
    <div data-role="content">
      <p>La plus part du temps vous n'aurez pas besoin de toucher le code généré.<br>
      Mais dans les cas non prévu, il faudra mettre la main à la pâte.</p>

      <p>Pour plus d'information sur Ruby :<br>
      http://www.ruby-lang.org/fr/documentation/quickstart/<br>
      http://www.ruby-doc.org/docs/ProgrammingRuby/</p>

      <p>Pour plus d'information sur les stratégies générées : TODO >_></p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpTest">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Le test</h1>
    </div>
    <div data-role="content">
      <p>A n'importe quel moment, vous pouvez lancer le test de votre stratégie en cliquant sur le bouton avec les engrenages en haut à droite d'une étape.<br>
      Comme mentionné précédemment, seules les actions classées sont testées.<br>
      Les étapes suivant l'étape sur laquelle vous vous trouvez ne sont pas testées non plus.<br>
      A moins que vous soyez sur l'étape de création de compte, celui-ci n'est pas non plus retesté à chaque fois.</p>

      <p>Une fois que le test est passé, une popup s'affiche pour vous indiquer que tout s'est bien passé, ou alors la page des erreurs s'affiche avec les informations récoltées.</p>
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->


  <div data-role="page" id="helpErrors">
    <div data-role="header">
      <a data-role="button" data-icon="back" data-direction="reverse" class="ui-btn-left backButton">Retour</a>
      <h1>Aide - Les erreurs</h1>
    </div>
    <div data-role="content">
      <p><a href="#startPage">Retour au menu</a></p>
    </div><!-- content -->
  </div><!-- page -->

  <script type="text/javascript" src="../main.js"></script>
</body>
</html>
